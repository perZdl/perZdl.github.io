<!DOCTYPE html>
<html>
<head>
	<title>test for vue</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
</head>
<body>
<div id="cnt">
	<div><img
    v-finger:pinch="pinch"
    v-finger:pressMove="pressMove"
    v-finger:rotate="rotate"
    d="1"
     src="http://alloyteam.github.io/AlloyFinger/asset/test.png" ref="img"></div>
</div>
<script type="text/javascript" src="./vue.min.js"></script>
<script type="text/javascript" src="./alloy_finger.js"></script>
<script type="text/javascript" src="./alloy_finger.vue.js"></script>
<script type="text/javascript" src="./transform.js"></script>
<script type="text/javascript" src="./transform.vue.js"></script>
<script type="text/javascript">
	Vue.use(AlloyFingerVue);
  var data = {
    ok: true,
    initScale: 1
  };
  // Vue.use(vueTransform);

	var h = new Vue({
		el: '#cnt',
    data: data,
		methods: {
			// tap: function() { console.log('onTap'); },
   //    multipointStart: function() { console.log('onMultipointStart'); },
   //    longTap: function() { console.log('onLongTap'); },
   //    swipe: function(evt) {
   //      console.log("swipe" + evt.direction);
   //      console.log('onSwipe');
   //    },
      pinch: function(evt) { 
        let img = this.$refs.img;
        // let width = img.width;
        // let height = img.height;
        // let newWidth =width * evt.zoom;
        // let newHeight =height* evt.zoom;
        // img.width = newWidth;
        // img.height = newHeight;

        img.style.WebkitTransform="scale("+evt.zoom+","+evt.zoom+")";
        img.style.transform="scale("+evt.zoom+","+evt.zoom+")";
        // img.scaleX = img.scaleY = this.initScale * ;
        // console.log(img.scaleX);
        // console.log(evt.zoom);

        // console.log('onPinch');
        // console.log(evt); 
      },
      // rotate: function(evt) {
      //   // console.log(evt.angle);
      //   // console.log('onRotate'); 
      // },
      pressMove: function(num, evt) {
        console.log(evt.deltaX);
        console.log(evt.deltaY);
        console.log('onPressMove with params:' + num); 
      },
      multipointStart: function () {
          let img = this.$refs.img; // 图片的对象
          Transform(img);
          this.initScale = img.scaleX;
          console.log(this.initScale);
      },

      rotate:function(evt){
         let img = this.$refs.img; // 图片的对象
         console.log(evt.angle);
         console.log(img.style.WebkitTransform);
         
         img.style.WebkitTransform="rotateZ("+evt.angle+")";
          img.style.transform="rotateZ("+evt.angle+")";
          // img.rotateZ += evt.angle;
          // img.rotateZ += evt.angle;
      },
      // multipointEnd: function() { console.log('onMultipointEnd'); },
      // doubleTap: function() { console.log('onDoubleTap'); },
      // singleTap: function () { console.log('onSingleTap'); },

      // touchStart: function() { console.log('onTouchStart'); },
      // touchMove: function() { console.log('onTouchMove'); },
      // touchEnd: function() { console.log('onTouchEnd'); },
      // touchCancel: function() { console.log('onTouchCancel'); }
		}
	});
</script>
</body>
</html>